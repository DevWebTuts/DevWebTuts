webpackJsonp([9],{677:function(t,e,i){var a=i(356)(i(697),i(739),null,null,null);t.exports=a.exports},697:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(135),r=i.n(a),n=i(134),s=i.n(n);e.default={name:"current-user",inject:["auth"],data:function(){return{search:"",article:{title:"",body:"",image:""}}},methods:{createArticle:function(){function t(t,i){return e.apply(this,arguments)}var e=s()(r.a.mark(function t(e,i){var a,n,s,c,l,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=this.article,n=a.title,s=a.body,c=a.image,n&&this.auth.currentUser){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this.$apollo.mutate({mutation:gql.mutations.createArticle,variables:{title:n,body:s,image:c,userId:this.auth.currentUser.id}});case 6:l=t.sent,o=l.data,this.$q.events.$emit("Created new article","positive"),this.$router.push({name:"article",params:{id:o.article.id},query:{action:"edit"}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),this.$q.events.$emit("Failed creating new article","negative");case 15:return t.prev=15,i(),this.$refs.newArticleDialog.close(),t.finish(15);case 19:case"end":return t.stop()}},t,this,[[0,12,15,19]])}));return t}()}}},739:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row",staticStyle:{"min-height":"calc(100vh - 100px)"}},[t.auth.userLoading?i("div",{staticClass:"m-a"},[i("q-spinner",{attrs:{size:100}})],1):t.auth.currentUser?i("div",{staticClass:"fit"},[i("q-dialog",{ref:"newArticleDialog",attrs:{maximized:"maximized"}},[i("q-toolbar",[i("q-toolbar-title",[t._v("New Article")]),i("q-btn",{attrs:{icon:"close",small:"small",round:"round",outline:"outline"},on:{click:function(e){t.$refs.newArticleDialog.close()}}}),i("q-btn",{attrs:{icon:"save",small:"small",color:"secondary",loader:"loader",round:"round",outline:"outline"},on:{click:t.createArticle}})],1),i("q-field",{attrs:{icon:"title"}},[i("q-input",{attrs:{"float-label":"Title"},model:{value:t.article.title,callback:function(e){t.article.title=e},expression:"article.title"}})],1),i("q-field",{attrs:{icon:"add_a_photo"}},[i("q-input",{attrs:{"float-label":"Image"},model:{value:t.article.image,callback:function(e){t.article.image=e},expression:"article.image"}})],1),i("div",{staticClass:"text-center"},[i("img",{staticStyle:{height:"300px",width:"300px"},attrs:{src:t.article.image}})])],1),i("q-btn",{staticClass:"fixed-bottom-right",staticStyle:{bottom:"70px",right:"18px"},attrs:{round:"round",icon:"add",color:"primary"},on:{click:function(e){t.$refs.newArticleDialog.open()}}}),i("div",{staticStyle:{padding:"16px"}},[i("h3",{staticClass:"text-secondary"},[t._v("Articles ("+t._s(t.auth.currentUser.articleCount.count)+")")]),i("h5",[t._v(t._s(t.auth.currentUser.firstName))])]),i("articles",{attrs:{articles:t.auth.currentUser.articles}})],1):i("div",{staticClass:"m-a"},[i("h1",{staticClass:"text-center"},[t._v("Login now to create articles")]),i("div",{staticClass:"text-center"},[i("q-btn",{staticStyle:{width:"200px"},attrs:{color:"primary"},on:{click:function(e){t.$root.login()}}},[t._v("Login")])],1)])])},staticRenderFns:[]}}});